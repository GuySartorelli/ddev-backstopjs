name: ddev-backstopjs

pre_install_actions:
  - test -d ${DDEV_APPROOT}/tests/backstop || mkdir ${DDEV_APPROOT}/tests/backstop
  - export IGNOREFILE="${DDEV_APPROOT}/tests/backstop/.gitignore"
  - test -f $IGNOREFILE || echo "## ddev-generated\n**/bitmaps_test\n**/html_report\n" > $IGNOREFILE
  - grep -q "## ddev-generated" $IGNOREFILE && echo "## ddev-generated\n**/bitmaps_test\n**/html_report\n" > $IGNOREFILE


# list of files and directories listed that are copied into project .ddev directory
# Each file should contain #ddev-generated so it can be replaced by a later `ddev get`
# if it hasn't been modified by the user.
# DDEV environment variables can be interpolated into these filenames
project_files:
- docker-compose.backstop.yaml
- backstopBuild/
- commands/

post_install_actions:
 - ddev backstop init
